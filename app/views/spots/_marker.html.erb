<script>  
  function addMarker() {
    let glyphImg = document.createElement("img");

    const avatarUrl = '<%= current_user.avatar_url %>'.startsWith('http')
      ? '<%= current_user.avatar_url %>'
      : new URL('<%= current_user.avatar_url %>', baseUrl).href;

    glyphImg.src = avatarUrl;
    glyphImg.className = 'glyph-img';  

    let glyphSvgPinView = new google.maps.marker.PinElement({
      glyph: glyphImg,
    });
    let marker = new google.maps.marker.AdvancedMarkerElement({
      map: map,
      position: {lat: <%= @spot.latitude %>, lng: <%= @spot.longitude %>},
      content: glyphSvgPinView.element,
    });
    marker.id = <%= @spot.id %>;
    markers.push(marker);
  }


  addMarker();
</script>